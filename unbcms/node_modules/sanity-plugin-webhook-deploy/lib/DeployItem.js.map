{"version":3,"sources":["../src/DeployItem.js"],"names":["DeployItem","hook","toast","lastDeploy","setLastDeploy","isDeleting","setIsDeleting","isConfirmOpen","setConfirmOpen","onDelete","client","delete","_id","error","push","status","title","onDeploy","axios","post","url","confirmDialog","CardRow","styled","div","MetaContainer","MetaColumn","ActionsContainer","Code","margin","statusBadgeUrl","display"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,GAAG,QAAY;AAAA,MAAVC,IAAU,QAAVA,IAAU;AAC9B,MAAMC,KAAK,GAAG,mBAAd;;AACA,kBAAoC,qBAAS,qBAAT,CAApC;AAAA;AAAA,MAAOC,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAAoC,qBAAS,KAAT,CAApC;AAAA;AAAA,MAAOC,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAAwC,qBAAS,KAAT,CAAxC;AAAA;AAAA,MAAOC,aAAP;AAAA,MAAsBC,cAAtB;;AAEA,MAAMC,QAAQ;AAAA,kCAAG,aAAY;AAC5BH,MAAAA,aAAa,CAAC,IAAD,CAAb;;AAEA,UAAI;AACH,cAAMI,gBAAOC,MAAP,CAAcV,IAAI,CAACW,GAAnB,CAAN;AACA,OAFD,CAEE,OAAOC,KAAP,EAAc;AACfX,QAAAA,KAAK,CAACY,IAAN,CAAW;AACVC,UAAAA,MAAM,EAAE,OADE;AAEVC,UAAAA,KAAK,EAAE;AAFG,SAAX;AAIA;;AAEDV,MAAAA,aAAa,CAAC,KAAD,CAAb;AAEAJ,MAAAA,KAAK,CAACY,IAAN,CAAW;AACVC,QAAAA,MAAM,EAAE,SADE;AAEVC,QAAAA,KAAK,oBAAaf,IAAI,CAACe,KAAlB;AAFK,OAAX;AAKAR,MAAAA,cAAc,CAAC,KAAD,CAAd;AACA,KApBa;;AAAA,oBAARC,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAsBA,MAAMQ,QAAQ;AAAA,kCAAG,aAAY;AAC5B,UAAI;AACH,cAAMC,eAAMC,IAAN,CAAWlB,IAAI,CAACmB,GAAhB,EAAqB,EAArB,CAAN;AACA,OAFD,CAEE,OAAOP,KAAP,EAAc;AACfX,QAAAA,KAAK,CAACY,IAAN,CAAW;AACVC,UAAAA,MAAM,EAAE,OADE;AAEVC,UAAAA,KAAK,EAAE;AAFG,SAAX;AAIA;;AAEDZ,MAAAA,aAAa,CAAC,qBAAD,CAAb;AAEAF,MAAAA,KAAK,CAACY,IAAN,CAAW;AACVC,QAAAA,MAAM,EAAE,SADE;AAEVC,QAAAA,KAAK,qBAAcf,IAAI,CAACe,KAAnB;AAFK,OAAX;AAIA,KAhBa;;AAAA,oBAARC,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAkBA,MAAMI,aAAa,GAAGd,aAAa,iBAClC,6BAAC,UAAD;AACC,IAAA,KAAK,EAAE,CADR;AAEC,IAAA,MAAM,mBAAYN,IAAI,CAACe,KAAjB,CAFP;AAGC,IAAA,OAAO,EAAE,MAAMR,cAAc,CAAC,KAAD;AAH9B,kBAIC,6BAAC,OAAD;AAAK,IAAA,OAAO,EAAE,CAAd;AAAiB,IAAA,UAAU,EAAE;AAA7B,kBACC,6BAAC,OAAD;AAAK,IAAA,YAAY,EAAE;AAAnB,kBACC,oLADD,CADD,EAQEH,UAAU,gBACV,6BAAC,WAAD,OADU,gBAGV,6BAAC,UAAD;AACC,IAAA,IAAI,EAAC,UADN;AAEC,IAAA,IAAI,EAAC,oBAFN;AAGC,IAAA,OAAO,EAAEI;AAHV,IAXF,CAJD,CADD;;AA0BA,MAAMa,OAAO,GAAGC,0BAAOC,GAAV,oQAAb;;AAWA,MAAMC,aAAa,GAAGF,0BAAOC,GAAV,oRAAnB;;AAYA,MAAME,UAAU,GAAGH,0BAAOC,GAAV,mMAAhB;;AASA,MAAMG,gBAAgB,GAAGJ,0BAAOC,GAAV,gOAAtB;;AAUA,MAAMI,IAAI,GAAGL,0BAAOC,GAAV,yYAAV;;AAcA,sBACC,6BAAC,QAAD;AAAM,IAAA,OAAO,EAAE,CAAf;AAAkB,IAAA,MAAM,EAAE,CAA1B;AAA6B,IAAA,MAAM,EAAE;AAArC,kBACC,6BAAC,OAAD,qBACC,6BAAC,aAAD,qBACC,6BAAC,UAAD,qBACC;AAAG,IAAA,KAAK,EAAE;AAACK,MAAAA,MAAM,EAAE;AAAT;AAAV,KAAwB5B,IAAI,CAACe,KAAL,IAAc,SAAtC,CADD,CADD,eAIC,6BAAC,UAAD,qBACC,6BAAC,IAAD;AAAM,IAAA,IAAI,EAAE;AAAZ,KAAgBf,IAAI,CAACmB,GAArB,CADD,CAJD,eAOC;AACC,IAAA,GAAG,EAAEjB,UADN;AAEC,IAAA,GAAG,EAAEF,IAAI,CAAC6B,cAFX;AAGC,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV;AAHR,IAPD,CADD,eAcC,6BAAC,gBAAD,qBACC,6BAAC,OAAD,qBACC,6BAAC,UAAD;AACC,IAAA,IAAI,EAAC,UADN;AAEC,IAAA,IAAI,EAAC,QAFN;AAGC,IAAA,OAAO,EAAE,MAAMvB,cAAc,CAAC,IAAD;AAH9B,IADD,CADD,eAQC,6BAAC,OAAD;AAAK,IAAA,UAAU,EAAE;AAAjB,kBACC,6BAAC,UAAD;AACC,IAAA,IAAI,EAAC,SADN;AAEC,IAAA,IAAI,EAAC,cAFN;AAGC,IAAA,OAAO,EAAES;AAHV,IADD,CARD,CAdD,CADD,EAgCEI,aAhCF,CADD;AAoCA,CApKD;;eAsKerB,U","sourcesContent":["import React, {useState} from 'react';\nimport {nanoid} from 'nanoid';\nimport client from 'part:@sanity/base/client';\nimport styled from 'styled-components';\nimport {useToast, Box, Card, Button, Spinner, Dialog} from '@sanity/ui';\nimport axios from 'axios';\n\nconst DeployItem = ({hook}) => {\n\tconst toast = useToast();\n\tconst [lastDeploy, setLastDeploy] = useState(nanoid());\n\tconst [isDeleting, setIsDeleting] = useState(false);\n\tconst [isConfirmOpen, setConfirmOpen] = useState(false);\n\n\tconst onDelete = async () => {\n\t\tsetIsDeleting(true);\n\n\t\ttry {\n\t\t\tawait client.delete(hook._id);\n\t\t} catch (error) {\n\t\t\ttoast.push({\n\t\t\t\tstatus: 'error',\n\t\t\t\ttitle: 'An error occured in deleting this webhook.',\n\t\t\t});\n\t\t}\n\n\t\tsetIsDeleting(false);\n\n\t\ttoast.push({\n\t\t\tstatus: 'success',\n\t\t\ttitle: `Deleted ${hook.title}!`,\n\t\t});\n\n\t\tsetConfirmOpen(false);\n\t};\n\n\tconst onDeploy = async () => {\n\t\ttry {\n\t\t\tawait axios.post(hook.url, {});\n\t\t} catch (error) {\n\t\t\ttoast.push({\n\t\t\t\tstatus: 'error',\n\t\t\t\ttitle: 'An error occured in deploying this webhook.',\n\t\t\t});\n\t\t}\n\n\t\tsetLastDeploy(nanoid());\n\n\t\ttoast.push({\n\t\t\tstatus: 'success',\n\t\t\ttitle: `Deployed ${hook.title}!`,\n\t\t});\n\t};\n\n\tconst confirmDialog = isConfirmOpen && (\n\t\t<Dialog\n\t\t\twidth={1}\n\t\t\theader={`Delete ${hook.title}`}\n\t\t\tonClose={() => setConfirmOpen(false)}>\n\t\t\t<Box padding={4} paddingTop={0}>\n\t\t\t\t<Box marginBottom={4}>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis deletes your deploy button, but will not delete the\n\t\t\t\t\t\tenvironment. This is a permanent action. You'll need to\n\t\t\t\t\t\tre-add this environment.\n\t\t\t\t\t</p>\n\t\t\t\t</Box>\n\t\t\t\t{isDeleting ? (\n\t\t\t\t\t<Spinner />\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttone=\"critical\"\n\t\t\t\t\t\ttext=\"Permanently Delete\"\n\t\t\t\t\t\tonClick={onDelete}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t</Dialog>\n\t);\n\n\tconst CardRow = styled.div`\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t@media (min-width: 1000px) {\n\t\t\tflex-direction: row;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t}\n\t`;\n\n\tconst MetaContainer = styled.div`\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tmargin-bottom: 20px;\n\n\t\t@media (min-width: 1000px) {\n\t\t\tflex-direction: row;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t`;\n\n\tconst MetaColumn = styled.div`\n\t\tmargin-bottom: 5px;\n\n\t\t@media (min-width: 1000px) {\n\t\t\tmargin-bottom: 0;\n\t\t\tmargin-right: 10px;\n\t\t}\n\t`;\n\n\tconst ActionsContainer = styled.div`\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: flex-start;\n\n\t\t@media (min-width: 1000px) {\n\t\t\talign-items: flex-end;\n\t\t}\n\t`;\n\n\tconst Code = styled.div`\n\t\tfont-family: -apple-system-ui-monospace, 'SF Mono', Menlo, Monaco,\n\t\t\tConsolas, monospace;\n\t\tpadding: 2px;\n\t\tdisplay: block;\n\t\tfont-size: 0.75em;\n\t\toverflow-wrap: break-word;\n\t\tborder-radius: 5px;\n\t\tborder: 1px solid #cdcdcd;\n\t\t@media (max-width: 600px) {\n\t\t\tmax-width: 250px;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<Card padding={4} radius={2} shadow={1}>\n\t\t\t<CardRow>\n\t\t\t\t<MetaContainer>\n\t\t\t\t\t<MetaColumn>\n\t\t\t\t\t\t<p style={{margin: 0}}>{hook.title || 'Netlify'}</p>\n\t\t\t\t\t</MetaColumn>\n\t\t\t\t\t<MetaColumn>\n\t\t\t\t\t\t<Code size={1}>{hook.url}</Code>\n\t\t\t\t\t</MetaColumn>\n\t\t\t\t\t<img\n\t\t\t\t\t\tkey={lastDeploy}\n\t\t\t\t\t\tsrc={hook.statusBadgeUrl}\n\t\t\t\t\t\tstyle={{display: 'block'}}\n\t\t\t\t\t/>\n\t\t\t\t</MetaContainer>\n\t\t\t\t<ActionsContainer>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttone=\"critical\"\n\t\t\t\t\t\t\ttext=\"Delete\"\n\t\t\t\t\t\t\tonClick={() => setConfirmOpen(true)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box marginLeft={2}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttone=\"primary\"\n\t\t\t\t\t\t\ttext=\"Start Deploy\"\n\t\t\t\t\t\t\tonClick={onDeploy}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t</ActionsContainer>\n\t\t\t</CardRow>\n\t\t\t{confirmDialog}\n\t\t</Card>\n\t);\n};\n\nexport default DeployItem;\n"],"file":"DeployItem.js"}