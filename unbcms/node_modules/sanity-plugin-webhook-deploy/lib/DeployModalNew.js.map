{"version":3,"sources":["../src/DeployModalNew.js"],"names":["WEBHOOK_TYPE","DeployModalNew","onClose","toast","isLoading","setIsLoading","title","url","statusBadgeUrl","pendingHook","setPendingHook","isFormDisabled","onCloseNewModal","onSubmit","event","preventDefault","client","create","_id","_type","error","push","status","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {nanoid} from 'nanoid';\n\nimport client from 'part:@sanity/base/client';\nimport {\n\tuseToast,\n\tBox,\n\tStack,\n\tButton,\n\tSpinner,\n\tDialog,\n\tTextInput,\n\tLabel,\n} from '@sanity/ui';\n\nconst WEBHOOK_TYPE = 'webhook_deploy';\n\nconst DeployModalNew = ({onClose}) => {\n\tconst toast = useToast();\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [pendingHook, setPendingHook] = useState({\n\t\ttitle: '',\n\t\turl: '',\n\t\tstatusBadgeUrl: '',\n\t});\n\tconst isFormDisabled =\n\t\t!pendingHook.title || !pendingHook.url || !pendingHook.statusBadgeUrl;\n\n\tconst onCloseNewModal = () => {\n\t\tonClose(false);\n\t};\n\n\tconst onSubmit = async event => {\n\t\tevent.preventDefault();\n\n\t\tsetIsLoading(true);\n\n\t\ttry {\n\t\t\tawait client.create({\n\t\t\t\t_id: `netlify-deploy.${nanoid()}`,\n\t\t\t\t_type: WEBHOOK_TYPE,\n\t\t\t\ttitle: pendingHook.title,\n\t\t\t\turl: pendingHook.url,\n\t\t\t\tstatusBadgeUrl: pendingHook.statusBadgeUrl,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\ttoast.push({\n\t\t\t\tstatus: 'error',\n\t\t\t\ttitle: 'An error occured in creating this webhook.',\n\t\t\t});\n\t\t}\n\n\t\tsetIsLoading(false);\n\n\t\ttoast.push({\n\t\t\tstatus: 'success',\n\t\t\ttitle: `Added ${pendingHook.title}!`,\n\t\t});\n\n\t\tonCloseNewModal();\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\twidth={1}\n\t\t\theader=\"New Netlify Enviroment\"\n\t\t\tonClose={onCloseNewModal}>\n\t\t\t<Box padding={4}>\n\t\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t\t<Stack space={5}>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Box marginBottom={3}>\n\t\t\t\t\t\t\t\t<Label>Title</Label>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tvalue={pendingHook.title}\n\t\t\t\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\t\t\t\tsetPendingHook({\n\t\t\t\t\t\t\t\t\t\t...pendingHook,\n\t\t\t\t\t\t\t\t\t\ttitle: event.target.value,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Box marginBottom={3}>\n\t\t\t\t\t\t\t\t<Label>URL</Label>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tvalue={pendingHook.url}\n\t\t\t\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\t\t\t\tsetPendingHook({\n\t\t\t\t\t\t\t\t\t\t...pendingHook,\n\t\t\t\t\t\t\t\t\t\turl: event.target.value,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Box marginBottom={3}>\n\t\t\t\t\t\t\t\t<Label>Status Badge URL</Label>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tvalue={pendingHook.statusBadgeUrl}\n\t\t\t\t\t\t\t\tonChange={event =>\n\t\t\t\t\t\t\t\t\tsetPendingHook({\n\t\t\t\t\t\t\t\t\t\t...pendingHook,\n\t\t\t\t\t\t\t\t\t\tstatusBadgeUrl: event.target.value,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t{isLoading ? (\n\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tdisabled={isFormDisabled}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\ttone=\"primary\"\n\t\t\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\t\t\tisFormDisabled\n\t\t\t\t\t\t\t\t\t\t\t? 'Fill out required fields.'\n\t\t\t\t\t\t\t\t\t\t\t: 'Create'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Stack>\n\t\t\t\t</form>\n\t\t\t</Box>\n\t\t</Dialog>\n\t);\n};\n\nexport default DeployModalNew;\n"],"file":"DeployModalNew.js"}